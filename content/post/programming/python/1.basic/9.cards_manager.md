---
title: Python card manager
comments: true
toc: true
tags:
    - python
description: 本文为 Python 基础总结的练习项目:名片管理系统
categories:
    - programming
date: 2020-03-21 10:39:54
---

# 综合应用 —— 名片管理系统

## 目标

综合应用已经学习过的知识点：

-   **变量**
-   **流程控制**
-   **函数**
-   **模块**

开发 **名片管理系统**

## 系统需求

-   1. 程序启动，显示名片管理系统欢迎界面，并显示功能菜单

```
**************************************************
欢迎使用【名片管理系统】V1.0

1. 新建名片
2. 显示全部
3. 查询名片

0. 退出系统
**************************************************
```

-   2. 用户用数字选择不同的功能
-   3. 根据功能选择，执行不同的功能
-   4. 用户名片需要记录用户的 **姓名**、**电话**、**QQ**、**邮件**
-   5. 如果查询到指定的名片，用户可以选择 **修改** 或者 **删除** 名片

## 步骤

自顶而下，大功能框架编写测试好，再对逐个功能进行:编写 -> 测试。

1. 框架搭建
   写项目时，往往先搭建框架：大概功能的注释，对每个功能的简单提示。然后再逐个功能进行:编写 -> 测试 -> 完成。
   注: 如果在开发程序时,不希望立刻编写分支内部的代码, 可以使用 pass
2. 新增名片
3. 显示所有名片
4. 查询名片
5. 查询成功后修改、删除名片
6. 让 Python 程序能够直接运行

## 01. 框架搭建

**目标**

-   搭建名片管理系统 **框架结构**
    1. **准备文件**，确定文件名，保证能够 **在需要的位置** 编写代码
    2. 编写 **主运行循环**，实现基本的 **用户输入和判断**

### 1.1 文件准备

1. 新建 `cards_main.py` 保存 **主程序功能代码**
    - **程序的入口**
    - 每一次启动名片管理系统都通过 `main` 这个文件启动
2. 新建 `cards_tools.py` 保存 **所有名片功能函数**
    - 将对名片的 **新增**、**查询**、**修改**、**删除** 等功能封装在不同的函数中

### 1.2 编写主运行循环

-   在 `cards_main` 中添加一个 **无限循环**

```python

while True:

    # TODO(小明) 显示系统菜单

    action = input("请选择操作功能：")

    print("您选择的操作是：%s" % action)

    # 根据用户输入决定后续的操作
    if action in ["1", "2", "3"]:
        pass
    elif action == "0":
        print("欢迎再次使用【名片管理系统】")

        break
    else:
        print("输入错误，请重新输入")

```

#### 字符串判断

1. 使用 `in` 针对 **列表** 判断，避免使用 `or` 拼接复杂的逻辑条件
2. 没有使用 `int` 转换用户输入，可以避免 **一旦用户输入的不是数字**，导致程序运行出错

#### pass

-   `pass` 就是一个空语句，不做任何事情，一般用做占位语句
-   是为了保持程序结构的完整性

#### 无限循环

-   在开发软件时，如果 **不希望程序执行后** 立即退出
-   可以在程序中增加一个 **无限循环**
-   **由用户来决定** 退出程序的时机

#### TODO 注释

-   PyCharm 中，在 `#` 后跟上 `TODO`，用于标记需要去做的工作。
    点击 PyCharm 左下角的小窗口图标，便可以知道哪些 TODO，并跳转。

```python
# TODO(作者/邮件) 显示系统菜单
```

## 02. 保存名片数据的结构

**程序就是用来处理数据的，而变量就是用来存储数据的**

-   确定数据的存储结构，是搭建框架后要做的重要事情之一。
-   使用 **字典** 记录 **每一张名片** 的详细信息
-   使用 **列表** 统一记录所有的 **名片字典**

**注意**

1. **如果所有相关操作**，都需要使用这个数据，那它应该 **定义在程序的顶部**
2. **程序刚运行时，没有数据**，所以是 **空列表**

**注意**

-   在函数中使用 `return` 表示返回
-   如果在 `return` 后没有跟任何内容，只是表示该函数执行到此就不再执行后续的代码
-   要删除名片记录，只需要把列表中对应的字典删除即可
-   要修改名片记录，只需要把列表中对应的字典中每一个键值对的数据修改即可
-   **如果用户在使用时，某些名片内容并不想修改**，应该如何做呢？—— 既然系统提供的 `input` 函数不能满足需求，那么就新定义一个函数 `input_card_info` 对系统的 `input` 函数进行扩展

```python
def input_card_info(dict_value, tip_message):

    """输入名片信息

    :param dict_value: 字典原有值
    :param tip_message: 输入提示信息
    :return: 如果输入，返回输入内容，否则返回字典原有值
    """
    # 1. 提示用户输入内容
    result_str = input(tip_message)

    # 2. 针对用户的输入进行判断，如果用户输入了内容，直接返回结果
    if len(result_str) > 0:

        return result_str
    # 3. 如果用户没有输入内容，返回 `字典中原有的值`
    else:

        return dict_value

```

## 文档注释

在完成函数的功能之后，添加注释，以便别人或者自己以后阅读。

## 07. LINUX 上的 `Shebang` 符号(`#!`)

-   `#!`这个符号叫做 `Shebang` 或者 `Sha-bang`
-   `Shebang` 通常在 `Unix` 系统脚本的中 **第一行开头** 使用
-   指明 **执行这个脚本文件** 的 **解释程序**

### 使用 Shebang 的步骤

-   1. 使用 `which` 查询 `python3` 解释器所在路径

```bash
$ which python3
```

-   2. 修改要运行的 **主 python 文件**，在第一行增加以下内容

```python
#! /usr/bin/python3
```

-   3. 修改 **主 python 文件** 的文件权限，增加执行权限

```bash
$ chmod +x cards_main.py
```

-   4. 在需要时执行程序即可

```bash
./cards_main.py
```

推荐:
[Effective Python 用 pythonic 方式来思考](https://zhuanlan.zhihu.com/p/84292970)
[Shebang wiki](https://zh.wikipedia.org/wiki/Shebang)
